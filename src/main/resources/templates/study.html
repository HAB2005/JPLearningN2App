<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc t·∫≠p - JLPT N2 Practice</title>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" th:href="@{/css/study.css}">
    <script th:replace="~{fragments/header :: header-script}"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div th:replace="~{fragments/sidebar :: sidebar}"></div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div th:replace="~{fragments/header :: header}"></div>
            
            <!-- Study Content -->
            <div class="content">
                <div class="study-header">
                    <h2>üìö H·ªçc t·∫≠p</h2>
                    <p>Ch·ªçn lo·∫°i n·ªôi dung v√† b√†i h·ªçc ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
                </div>

                <!-- Type Tabs -->
                <div class="type-tabs">
                    <button class="tab-btn active" onclick="switchTab('vocabulary')">
                        üìñ T·ª´ v·ª±ng
                    </button>
                    <button class="tab-btn" onclick="switchTab('kanji')">
                        ‚úçÔ∏è Kanji
                    </button>
                </div>

                <!-- Vocabulary Section -->
                <div id="vocabulary-section" class="tab-content active">
                    <div class="chapters-grid">
                        <div th:each="chapter : ${chapters}" class="chapter-card">
                            <div class="chapter-header">
                                <h3 th:text="${chapter.name}">Chapter 1</h3>
                                <p th:text="${chapter.description}">M√¥ t·∫£ ch∆∞∆°ng</p>
                            </div>
                            <div class="lessons-list">
                                <a th:each="lesson : ${chapter.lessons}" 
                                   th:href="@{/study/lesson/{id}(id=${lesson.id})}"
                                   class="lesson-item">
                                    <span class="lesson-name" th:text="${lesson.name}">Lesson 1</span>
                                    <span class="lesson-count" th:text="${lesson.flashcards != null ? lesson.flashcards.size() : 0} + ' t·ª´'">10 t·ª´</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div th:if="${chapters.isEmpty()}" class="empty-state">
                        <p>üìö Ch∆∞a c√≥ ch∆∞∆°ng h·ªçc n√†o. Vui l√≤ng th√™m d·ªØ li·ªáu v√†o database.</p>
                    </div>
                </div>

                <!-- Kanji Section -->
                <div id="kanji-section" class="tab-content">
                    <div class="kanji-options">
                        <div class="kanji-selector-card">
                            <h3>Ch·ªçn s·ªë l∆∞·ª£ng Kanji</h3>
                            <p>Ch·ªçn s·ªë l∆∞·ª£ng kanji b·∫°n mu·ªën h·ªçc trong phi√™n n√†y</p>
                            
                            <div class="kanji-quantity-options">
                                <button class="quantity-btn" onclick="startKanjiStudy(10)">
                                    <span class="quantity-number">10</span>
                                    <span class="quantity-label">Kanji</span>
                                </button>
                                <button class="quantity-btn" onclick="startKanjiStudy(20)">
                                    <span class="quantity-number">20</span>
                                    <span class="quantity-label">Kanji</span>
                                </button>
                                <button class="quantity-btn" onclick="startKanjiStudy(30)">
                                    <span class="quantity-number">30</span>
                                    <span class="quantity-label">Kanji</span>
                                </button>
                                <button class="quantity-btn" onclick="startKanjiStudy(50)">
                                    <span class="quantity-number">50</span>
                                    <span class="quantity-label">Kanji</span>
                                </button>
                            </div>

                            <div class="custom-quantity">
                                <label for="customQuantity">Ho·∫∑c nh·∫≠p s·ªë l∆∞·ª£ng t√πy ch·ªânh:</label>
                                <div class="custom-input-group">
                                    <input type="number" id="customQuantity" min="1" max="200" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng">
                                    <button class="btn-custom" onclick="startCustomKanjiStudy()">B·∫Øt ƒë·∫ßu</button>
                                </div>
                            </div>
                        </div>

                        <div class="kanji-info-card">
                            <h4>üí° G·ª£i √Ω h·ªçc t·∫≠p</h4>
                            <ul>
                                <li>B·∫Øt ƒë·∫ßu v·ªõi 10-20 kanji n·∫øu b·∫°n m·ªõi h·ªçc</li>
                                <li>H·ªçc ƒë·ªÅu ƒë·∫∑n m·ªói ng√†y s·∫Ω hi·ªáu qu·∫£ h∆°n h·ªçc nhi·ªÅu m·ªôt l√∫c</li>
                                <li>H·ªá th·ªëng s·∫Ω ∆∞u ti√™n c√°c kanji b·∫°n ch∆∞a h·ªçc</li>
                                <li>B·∫°n c√≥ th·ªÉ ƒë√°nh d·∫•u kanji ƒë√£ thu·ªôc ƒë·ªÉ kh√¥ng hi·ªán l·∫°i</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(type) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab
            event.target.classList.add('active');
            document.getElementById(type + '-section').classList.add('active');
        }

        function startKanjiStudy(quantity) {
            window.location.href = '/study/kanji?quantity=' + quantity;
        }

        function startCustomKanjiStudy() {
            const quantity = document.getElementById('customQuantity').value;
            if (quantity && quantity > 0) {
                window.location.href = '/study/kanji?quantity=' + quantity;
            } else {
                alert('Vui l√≤ng nh·∫≠p s·ªë l∆∞·ª£ng h·ª£p l·ªá');
            }
        }
    </script>
</body>
</html>
